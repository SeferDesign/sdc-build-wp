[package]
name = "mago"
version = "1.0.0-beta.14"
edition = "2024"
authors = ["Saif Eddin Gmati <azjezz@carthage.software>"]
license = "MIT OR Apache-2.0"
description = "A comprehensive suite of PHP tooling inspired by Rustâ€™s approach, providing parsing, linting, formatting, and more through a unified CLI and library interface."
homepage = "https://mago.carthage.software"
repository = "https://github.com/carthage-software/mago"
rust-version = "1.89.0"
exclude = ["docs", "composer", "scripts"]

[workspace]
package.edition = "2024"
package.authors = ["Saif Eddin Gmati <azjezz@carthage.software>"]
package.license = "MIT OR Apache-2.0"
package.version = "1.0.0-beta.14"
package.homepage = "https://mago.carthage.software"
package.repository = "https://github.com/carthage-software/mago"
package.rust-version = "1.89.0"
members = ["crates/*"]

[workspace.lints.clippy]
large_enum_variant = { level = "allow" }
print_stdout = { level = "forbid" }
print_stderr = { level = "forbid" }
dbg_macro = { level = "forbid" }

[workspace.dependencies]
mago-syntax-core = { path = "crates/syntax-core", version = "1.0.0-beta.14" }
mago-syntax = { path = "crates/syntax", version = "1.0.0-beta.14" }
mago-type-syntax = { path = "crates/type-syntax", version = "1.0.0-beta.14" }
mago-casing = { path = "crates/casing", version = "1.0.0-beta.14" }
mago-composer = { path = "crates/composer", version = "1.0.0-beta.14" }
mago-docblock = { path = "crates/docblock", version = "1.0.0-beta.14" }
mago-fixer = { path = "crates/fixer", version = "1.0.0-beta.14" }
mago-formatter = { path = "crates/formatter", version = "1.0.0-beta.14" }
mago-atom = { path = "crates/atom", version = "1.0.0-beta.14" }
mago-linter = { path = "crates/linter", version = "1.0.0-beta.14" }
mago-names = { path = "crates/names", version = "1.0.0-beta.14" }
mago-reporting = { path = "crates/reporting", version = "1.0.0-beta.14" }
mago-span = { path = "crates/span", version = "1.0.0-beta.14" }
mago-symbol-table = { path = "crates/symbol-table", version = "1.0.0-beta.14" }
mago-traverser = { path = "crates/traverser", version = "1.0.0-beta.14" }
mago-wasm = { path = "crates/wasm", version = "1.0.0-beta.14" }
mago-php-version = { path = "crates/php-version", version = "1.0.0-beta.14" }
mago-analyzer = { path = "crates/analyzer", version = "1.0.0-beta.14" }
mago-algebra = { path = "crates/algebra", version = "1.0.0-beta.14" }
mago-codex = { path = "crates/codex", version = "1.0.0-beta.14" }
mago-prelude = { path = "crates/prelude", version = "1.0.0-beta.14" }
mago-semantics = { path = "crates/semantics", version = "1.0.0-beta.14" }
mago-collector = { path = "crates/collector", version = "1.0.0-beta.14" }
mago-database = { path = "crates/database", version = "1.0.0-beta.14" }
mago-pager = { path = "crates/pager", version = "1.0.0-beta.14" }
tracing = { version = "0.1.40" }
ahash = { version = "0.8", default-features = false, features = ["compile-time-rng", "std"] }
serde_json = { version = "1.0.138" }
serde = { version = "1.0", features = ["derive"] }
strum = { version = "0.27", features = ["derive"] }
ordered-float = { version = "5.0", default-features = false, features = ["serde"] }
pretty_assertions = { version = "1.4.1" }
either = { version = "1.13.0" }
codespan-reporting = { version = "0.12.0", features = ["serde", "serialization"] }
tracing-subscriber = { version = "0.3.18", features = ["env-filter"] }
config = { version = "0.15.4", features = ["toml"] }
toml = "0.9.2"
num_cpus = "1.16.0"
regex = "1.11.0"
cruet = "0.15.0"
indicatif = { version = "0.18.0" }
paste = "1.0.15"
criterion = "0.7.0"
clap = { version = "4.5.20", features = ["cargo", "derive", "unicode", "wrap_help"] }
async-walkdir = "2.0.0"
termtree = "0.5.1"
wasm-bindgen = "0.2.97"
serde-wasm-bindgen = "0.6"
diffy = "0.4.0"
termcolor = "1.4.1"
indoc = "2"
self_update = { version = "0.42.0", features = ["archive-tar", "archive-zip", "compression-flate2"] }
openssl = { version = "0.10", features = ["vendored"] }
tempfile = "3.15.0"
colored = "3.0.0"
blake3 = "1.8.1"
memchr = "2.7.4"
dialoguer = "0.12.0"
unicode-width = { version = "0.2.0", default-features = false }
derivative = "2.2.0"
itertools = "0.14.0"
indexmap = { version = "2.8.0", features = ["serde"] }
rand = "0.9.0"
bitflags = { version = "2.9.1", features = ["serde"] }
strsim = "0.11.1"
ariadne = "0.5.1"
glob = "0.3.2"
walkdir = "2"
globset = "0.4"
rayon = "1.10.0"
bumpalo = { version = "3", features = ["collections", "serde"] }
dhat = "0.3"
ustr = { version = "1.1.0", features = ["serde"] }
rust-embed = { version = "8.7.2", features = ["interpolate-folder-path", "include-exclude"] }
bincode = { version = "2.0.1", features = ["serde"] }
libc = "0.2.175"
shell-words = "1.1.0"
ryu = "1.0"
itoa = "1.0"

[dependencies]
mago-syntax = { workspace = true }
mago-syntax-core = { workspace = true }
mago-reporting = { workspace = true }
mago-atom = { workspace = true }
mago-database = { workspace = true }
mago-linter = { workspace = true }
mago-names = { workspace = true }
mago-formatter = { workspace = true }
mago-fixer = { workspace = true }
mago-php-version = { workspace = true }
mago-composer = { workspace = true }
mago-semantics = { workspace = true }
mago-prelude = { workspace = true }
mago-codex = { workspace = true }
mago-analyzer = { workspace = true }
serde = { workspace = true }
clap = { workspace = true }
ahash = { workspace = true }
termtree = { workspace = true }
serde_json = { workspace = true }
strum = { workspace = true }
self_update = { workspace = true }
tracing = { workspace = true }
config = { workspace = true }
toml = { workspace = true }
num_cpus = { workspace = true }
diffy = { workspace = true }
tempfile = { workspace = true }
tracing-subscriber = { workspace = true }
indicatif = { workspace = true }
colored = { workspace = true }
dialoguer = { workspace = true }
rayon = { workspace = true }
indoc = { workspace = true }
bumpalo = { workspace = true }
dhat = { workspace = true, optional = true }

[dev-dependencies]
temp-env = "0.3.6"
pretty_assertions = { workspace = true }

[build-dependencies]
mago-prelude = { workspace = true, features = ["build"] }

[target.'cfg(target_os = "linux")'.dependencies]
openssl = { workspace = true }

[target.'cfg(any(target_os = "macos", target_os = "windows", target_env = "musl"))'.dependencies]
mimalloc = { version = "0.1.47" }

[features]
dhat-heap = ["dhat"]

[profile.release]
opt-level = 3
debug = false
strip = 'symbols'
debug-assertions = false
overflow-checks = false
lto = 'fat'
panic = 'abort'
incremental = true
codegen-units = 1
rpath = true

[profile.dev]
debug = 'full'
opt-level = 0
lto = 'off'
panic = 'unwind'
